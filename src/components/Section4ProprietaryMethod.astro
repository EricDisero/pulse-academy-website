---
// src/components/Section4ProprietaryMethod.astro
const methodSteps = [
    {
        title: "Reverse-Engineer Chart Hits",
        description: "We break down the exact frequency spectrum, tonal balance, and chord voicings of top tracks in your genre using AI-powered stem separation. No more guessing, we show you the measurable differences between your mix and the pros.",
        icon: `
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-pulse-purple group-hover:scale-110 transition-transform duration-300">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L1.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09l2.846.813-.813 2.846a4.5 4.5 0 00-3.09 3.09zM18.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L24 5.25l-.813 2.846a4.5 4.5 0 00-3.09 3.09l-2.846.813.813 2.846a4.5 4.5 0 003.09 3.09L24 18.75l-2.846.813a4.5 4.5 0 00-3.09-3.09L15 12l2.846.813.204.059zM9.813 15.904L9 18.75l-.813-2.846m0 0L5.25 15l2.846-.813m0 0L9 11.25l.813 2.846" />
        </svg>
        ` // Placeholder: Blueprint/Analysis Icon
    },
    {
        title: "Apply Data-Driven Fixes",
        description: "Get specific, measurable changes: precise frequency adjustments, strategic chord re-voicing for emotional impact, and exact stereo placement for clarity. Every fix is backed by data, not guesswork.",
        icon: `
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-pulse-purple group-hover:scale-110 transition-transform duration-300">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
        </svg>
        ` // Placeholder: Stems/Mixer Icon
    },
    {
        title: "Build Your Hit-Making System",
        description: "Walk away with a repeatable framework that transforms every future track. You'll know exactly what to listen for, which frequencies to target, and how to achieve radio-ready punch and clarity every time.",
        icon: `
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 text-pulse-purple group-hover:scale-110 transition-transform duration-300">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 12l4.179 2.25m0 0l5.571 3L17.75 12l-4.179-2.25m0 0l5.571-3L17.75 6.75l-4.179 2.25L6.429 9.75z" />
        </svg>
        ` // Placeholder: Gears/System Icon
    }
];
---
<section id="method" class="py-16 md:py-24 bg-gradient-to-b from-[#080810] to-[#0a0a15] px-4 md:px-8">
    <div class="max-w-3xl mx-auto text-center mb-12 md:mb-16">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold tracking-tight leading-tight pb-3">
            <span class="block text-silvery-gradient pb-2">The Secret Behind Every<br class="hidden sm:block"> Chart-Topping Track</span>
            <span class="block text-transparent bg-clip-text bg-gradient-to-r from-pulse-purple to-pulse-cyan pb-2 leading-normal">(And How We'll Unlock It<br class="hidden sm:block"> In Your Music)</span>
        </h2>
        <p class="mt-6 text-lg md:text-xl text-gray-400">
            While other producers waste years guessing what's wrong, we use cutting-edge AI stem separation technology to <strong class="text-white">reverse-engineer Billboard hits</strong> and reveal the exact frequencies, chord voicings, and tonal balance your tracks need to compete on streaming platforms.
        </p>
    </div>

    <!-- ENHANCED Audio Before/After Players with COMPELLING BACKSTORIES -->
    <div class="my-12 md:my-16 max-w-6xl mx-auto">
        <div class="card-gradient p-8 md:p-10 rounded-2xl shadow-glass border border-gray-800/20">
            <div class="text-center mb-8">
                <h3 class="text-3xl md:text-4xl font-bold text-silvery-gradient mb-4 pb-2">Proof This Actually Works</h3>
                <p class="text-xl text-gray-300 mb-2">Real transformations from producers in our 6-month mentorship program</p>
                <div class="flex items-center justify-center gap-2 text-sm text-pulse-cyan mb-3">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                    </svg>
                    <span>Toggle between BEFORE and AFTER to hear the transformation</span>
                </div>
                <p class="text-sm text-yellow-400 font-semibold">âš¡ The instant session reveals these exact problems in your tracks</p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- ALISSA'S ENHANCED STORY -->
                <div class="bg-gradient-to-br from-[#0a0a15] to-[#0c0c18] p-6 md:p-8 rounded-xl border border-gray-800/30 relative overflow-hidden">
                    <!-- Subtle background effect -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-pulse-purple/5 rounded-full blur-3xl"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 rounded-full bg-pulse-purple/20 flex items-center justify-center border border-pulse-purple/30">
                                <span class="text-xl">ðŸŽµ</span>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-pulse-purple">Alissa's Breakthrough</h4>
                                <p class="text-sm text-gray-400">Electronic Producer â€¢ 2+ Years Experience</p>
                            </div>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <p class="text-gray-300 text-sm leading-relaxed">
                                <strong>The Problem:</strong> Alissa had solid musical ideas but her tracks sounded thin and lifeless compared to commercial releases. She'd been struggling with tonal balance and chord voicings for over a year.
                            </p>
                            <p class="text-gray-300 text-sm leading-relaxed">
                                <strong>The Solution:</strong> Through our program, we used stem analysis to discover her chord voicings were creating frequency conflicts and her mix lacked the harmonic richness of professional tracks.
                            </p>
                            <div class="bg-green-500/10 p-3 rounded-lg border-l-4 border-green-500">
                                <p class="text-green-400 font-semibold text-sm">
                                    Result: After 4 months in our program, now creating label-quality tracks with proper tonal balance and depth
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ENHANCED Audio Player -->
                    <div class="audio-widget-container mb-4" style="max-width: 100%;">
                        <div class="audio-widget">
                          <style>
                            .audio-widget-container {
                              --scale-factor: 1;
                              --padding-adjust: 0px;
                              --primary-color: #8b5cf6;
                              --text-primary: #ffffff;
                              --text-secondary: #bbbbbb;
                            }
                            .audio-toggle-container {
                              display: flex;
                              justify-content: center;
                              align-items: center;
                              flex-direction: column;
                              font-family: 'Source Sans Pro', sans-serif;
                              transform: scale(var(--scale-factor));
                              transform-origin: top center;
                              padding-top: var(--padding-adjust);
                            }
                            .audio-box {
                              display: flex;
                              align-items: center;
                              justify-content: space-between;
                              background: rgba(0, 0, 0, 0.4);
                              width: 100%;
                              max-width: 350px;
                              padding: 12px 16px;
                              border-radius: 30px;
                              color: var(--text-primary);
                              font-size: 16px;
                              font-weight: bold;
                              cursor: pointer;
                              user-select: none;
                              position: relative;
                              border: 1px solid rgba(139, 92, 246, 0.2);
                            }
                            .audio-box:hover {
                              border-color: rgba(139, 92, 246, 0.4);
                              background: rgba(0, 0, 0, 0.6);
                            }
                            .play-btn {
                              background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                              border: none;
                              width: 40px;
                              height: 40px;
                              border-radius: 50%;
                              display: flex;
                              align-items: center;
                              justify-content: center;
                              font-size: 14px;
                              font-weight: bold;
                              cursor: pointer;
                              color: var(--text-primary);
                              position: relative;
                              line-height: 0;
                              z-index: 10;
                              box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
                            }
                            .play-btn:hover {
                              transform: scale(1.05);
                              box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
                            }
                            .play-btn svg {
                              width: 14px;
                              height: 14px;
                              display: block;
                            }
                            .toggle-switch {
                              position: relative;
                              width: 50px;
                              height: 26px;
                              background: rgba(255, 255, 255, 0.2);
                              border-radius: 20px;
                              transition: 0.3s;
                              z-index: 1;
                            }
                            .toggle-switch:before {
                              content: "";
                              position: absolute;
                              width: 22px;
                              height: 22px;
                              background: white;
                              border-radius: 50%;
                              top: 2px;
                              left: 2px;
                              transition: 0.3s;
                              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                            }
                            .audio-box.active .toggle-switch {
                              background: var(--primary-color);
                            }
                            .audio-box.active .toggle-switch:before {
                              left: 26px;
                            }
                            .audio-text {
                              display: flex;
                              flex-direction: column;
                              text-align: left;
                              font-size: 12px;
                              width: 180px;
                              pointer-events: none;
                            }
                            .audio-text span:first-child {
                              font-size: 16px;
                              color: var(--text-primary);
                            }
                            .audio-text span:last-child {
                              font-size: 12px;
                              color: var(--text-secondary);
                            }
                            .audio-box.active .audio-text span:last-child {
                              color: var(--primary-color);
                            }
                          </style>
    
                          <div class="audio-toggle-container">
                              <div class="audio-box">
                                  <button class="play-btn">
                                      <svg class="playIcon" viewBox="0 0 20 20" fill="currentColor">
                                          <polygon points="5,3 15,10 5,17"></polygon>
                                      </svg>
                                      <svg class="pauseIcon" viewBox="0 0 20 20" fill="currentColor" style="display: none;">
                                          <rect x="4" y="3" width="4" height="14"></rect>
                                          <rect x="12" y="3" width="4" height="14"></rect>
                                      </svg>
                                  </button>
                                  <div class="audio-text">
                                      <span class="trackTitle">"Midnight Drive"</span>
                                      <span class="trackSubtitle">Before: Thin & Lifeless</span>
                                  </div>
                                  <div class="toggle-switch"></div>
                              </div>
    
                              <audio class="beforeAudio" preload="none" src="https://files.catbox.moe/hug00i.mp3"></audio>
                              <audio class="afterAudio" preload="none" src="https://files.catbox.moe/kxdfc4.mp3"></audio>
                          </div>
                        </div>
                    </div>
                </div>
                
                <!-- PAUL'S ENHANCED STORY -->
                <div class="bg-gradient-to-br from-[#0a0a15] to-[#0c0c18] p-6 md:p-8 rounded-xl border border-gray-800/30 relative overflow-hidden">
                    <!-- Subtle background effect -->
                    <div class="absolute top-0 right-0 w-32 h-32 bg-pulse-cyan/5 rounded-full blur-3xl"></div>
                    
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 rounded-full bg-pulse-cyan/20 flex items-center justify-center border border-pulse-cyan/30">
                                <span class="text-xl">ðŸš€</span>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-pulse-cyan">Paul's Playlist Success</h4>
                                <p class="text-sm text-gray-400">Hip-Hop Producer â€¢ 3+ Years Experience</p>
                            </div>
                        </div>
                        
                        <div class="space-y-3 mb-6">
                            <p class="text-gray-300 text-sm leading-relaxed">
                                <strong>The Challenge:</strong> Paul's beats had great groove but sounded amateur compared to chart hits. His chord voicings were muddy and his tonal balance was completely off.
                            </p>
                            <p class="text-gray-300 text-sm leading-relaxed">
                                <strong>The Transformation:</strong> After working with us for several months, Paul learned the exact tonal clarity and punch techniques used in professional hip-hop tracks.
                            </p>
                            <div class="bg-green-500/10 p-3 rounded-lg border-l-4 border-green-500">
                                <p class="text-green-400 font-semibold text-sm">
                                    Result: Reached 30,000 monthly listeners in 3 months due to industry-standard track quality and playlist placements
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ENHANCED Audio Player -->
                    <div class="audio-widget-container" style="max-width: 100%;">
                        <div class="audio-widget">
                          <style>
                            .audio-widget-container {
                                --scale-factor: 1;
                                --padding-adjust: 0px;
                                --primary-color: #06b6d4;
                                --text-primary: #ffffff;
                                --text-secondary: #bbbbbb;
                            }
                            .audio-toggle-container {
                              display: flex;
                              justify-content: center;
                              align-items: center;
                              flex-direction: column;
                              font-family: 'Source Sans Pro', sans-serif;
                              transform: scale(var(--scale-factor));
                              transform-origin: top center;
                              padding-top: var(--padding-adjust);
                            }
                            .audio-box {
                              display: flex;
                              align-items: center;
                              justify-content: space-between;
                              background: rgba(0, 0, 0, 0.4);
                              width: 100%;
                              max-width: 350px;
                              padding: 12px 16px;
                              border-radius: 30px;
                              color: var(--text-primary);
                              font-size: 16px;
                              font-weight: bold;
                              cursor: pointer;
                              user-select: none;
                              position: relative;
                              border: 1px solid rgba(6, 182, 212, 0.2);
                            }
                            .audio-box:hover {
                              border-color: rgba(6, 182, 212, 0.4);
                              background: rgba(0, 0, 0, 0.6);
                            }
                            .play-btn {
                              background: linear-gradient(135deg, #06b6d4, #0891b2);
                              border: none;
                              width: 40px;
                              height: 40px;
                              border-radius: 50%;
                              display: flex;
                              align-items: center;
                              justify-content: center;
                              font-size: 14px;
                              font-weight: bold;
                              cursor: pointer;
                              color: var(--text-primary);
                              position: relative;
                              line-height: 0;
                              z-index: 10;
                              box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
                            }
                            .play-btn:hover {
                              transform: scale(1.05);
                              box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4);
                            }
                            .play-btn svg {
                              width: 14px;
                              height: 14px;
                              display: block;
                            }
                            .toggle-switch {
                              position: relative;
                              width: 50px;
                              height: 26px;
                              background: rgba(255, 255, 255, 0.2);
                              border-radius: 20px;
                              transition: 0.3s;
                              z-index: 1;
                            }
                            .toggle-switch:before {
                              content: "";
                              position: absolute;
                              width: 22px;
                              height: 22px;
                              background: white;
                              border-radius: 50%;
                              top: 2px;
                              left: 2px;
                              transition: 0.3s;
                              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                            }
                            .audio-box.active .toggle-switch {
                              background: var(--primary-color);
                            }
                            .audio-box.active .toggle-switch:before {
                              left: 26px;
                            }
                            .audio-text {
                              display: flex;
                              flex-direction: column;
                              text-align: left;
                              font-size: 12px;
                              width: 180px;
                              pointer-events: none;
                            }
                            .audio-text span:first-child {
                              font-size: 16px;
                              color: var(--text-primary);
                            }
                            .audio-text span:last-child {
                              font-size: 12px;
                              color: var(--text-secondary);
                            }
                            .audio-box.active .audio-text span:last-child {
                              color: var(--primary-color);
                            }
                          </style>
    
                          <div class="audio-toggle-container">
                              <div class="audio-box">
                                  <button class="play-btn">
                                      <svg class="playIcon" viewBox="0 0 20 20" fill="currentColor">
                                          <polygon points="5,3 15,10 5,17"></polygon>
                                      </svg>
                                      <svg class="pauseIcon" viewBox="0 0 20 20" fill="currentColor" style="display: none;">
                                          <rect x="4" y="3" width="4" height="14"></rect>
                                          <rect x="12" y="3" width="4" height="14"></rect>
                                      </svg>
                                  </button>
                                  <div class="audio-text">
                                      <span class="trackTitle">"City Nights"</span>
                                      <span class="trackSubtitle">Before: Muddy & Weak</span>
                                  </div>
                                  <div class="toggle-switch"></div>
                              </div>
    
                              <audio class="beforeAudio" preload="none" src="https://files.catbox.moe/xeyyvx.mp3"></audio>
                              <audio class="afterAudio" preload="none" src="https://files.catbox.moe/72bdae.mp3"></audio>
                          </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ENHANCED CALL-TO-ACTION -->
            <div class="text-center bg-gradient-to-r from-pulse-purple/10 to-pulse-cyan/10 p-6 rounded-xl border border-pulse-purple/20">
                <p class="text-lg text-gray-300 mb-4">
                    <strong class="text-white">Your tracks have the same potential.</strong> The question is: will you keep guessing what's wrong, or finally get the exact blueprint that reveals what needs fixing?
                </p>
                <div class="flex items-center justify-center gap-4 text-sm text-pulse-cyan">
                    <span>âš¡ Get specific fixes in 30 minutes</span>
                    <span>â€¢</span>
                    <span>ðŸ“ˆ See exactly what needs changing</span>
                    <span>â€¢</span>
                    <span>ðŸŽ¯ 100% get actionable insights</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ENHANCED METHOD STEPS -->
    <div class="max-w-5xl mx-auto pt-8">
        <div class="text-center mb-12">
            <h3 class="text-2xl md:text-3xl lg:text-4xl font-bold text-silvery-gradient mb-4 pb-2">The 30-Minute Process That<br class="hidden sm:block"> Changes Everything</h3>
            <p class="text-gray-400 max-w-2xl mx-auto">
                Stop wasting months on trial-and-error mixing. This proven 3-step diagnostic system reveals exactly what separates amateur bedroom productions from Billboard-charting hits, and gives you the precise technical roadmap to bridge that gap.
            </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-center md:text-left">
            {methodSteps.map((step, index) => (
                <div class="card-gradient p-6 md:p-8 rounded-xl shadow-glass border border-gray-800/20 flex flex-col items-center md:items-start group hover:border-pulse-purple/30 transition-all duration-300 relative overflow-hidden">
                    <!-- Step number -->
                    <div class="absolute top-4 right-4 w-8 h-8 rounded-full bg-pulse-purple/20 flex items-center justify-center text-pulse-purple font-bold text-sm">
                        {index + 1}
                    </div>
                    
                    <div class="mb-5 flex-shrink-0">
                        <Fragment set:html={step.icon} />
                    </div>
                    <div>
                        <h3 class="text-xl md:text-2xl font-semibold text-white mb-3 tracking-tight leading-normal pb-2">{step.title}</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">{step.description}</p>
                    </div>
                </div>
            ))}
        </div>
        
        <!-- ENHANCED BOTTOM CTA -->
        <div class="mt-12 text-center bg-[#080810]/60 p-8 rounded-xl border border-pulse-purple/20">
            <p class="text-xl text-gray-300 mb-4">
                <strong class="text-white">Stop wondering if your next track will finally be "the one."</strong>
            </p>
            <p class="text-gray-400 mb-6">
                Get the exact frequency analysis, tonal balance data, and specific fixes that separate your productions from chart-toppers. No guesswork. No generic advice. Just the precise changes your tracks need.
            </p>
            <a href="#offer-section" class="inline-flex items-center gap-2 bg-gradient-to-r from-pulse-purple to-pulse-cyan text-white px-8 py-3 rounded-lg font-semibold hover:scale-105 transition-transform duration-200 shadow-lg">
                Reveal What My Tracks Are Missing
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                </svg>
            </a>
        </div>
    </div>
</section> 

<script>
  (function() {
    const widgets = document.querySelectorAll(".audio-widget");
    widgets.forEach(widget => {
      let beforeAudio   = widget.querySelector(".beforeAudio") as HTMLAudioElement;
      let afterAudio    = widget.querySelector(".afterAudio") as HTMLAudioElement;
      let playPauseBtn  = widget.querySelector(".play-btn") as HTMLButtonElement;
      let playIcon      = widget.querySelector(".playIcon") as SVGElement;
      let pauseIcon     = widget.querySelector(".pauseIcon") as SVGElement;
      let audioBox      = widget.querySelector(".audio-box") as HTMLDivElement;
      let toggleSwitch  = widget.querySelector(".toggle-switch") as HTMLDivElement;
      let trackTitle    = widget.querySelector(".trackTitle") as HTMLSpanElement;
      let trackSubtitle = widget.querySelector(".trackSubtitle") as HTMLSpanElement;
      let audioWidgetContainer = widget.closest(".audio-widget-container") as HTMLDivElement;

      if (!beforeAudio || !afterAudio || !playPauseBtn || !playIcon || !pauseIcon || !audioBox || !toggleSwitch || !trackTitle || !trackSubtitle || !audioWidgetContainer) return;

      let isPlaying = false;
      let isAfter   = false;

      function syncPlayback() {
          if (beforeAudio.readyState >= 2 && afterAudio.readyState >=2) {
             afterAudio.currentTime = beforeAudio.currentTime;
          }
      }

      function togglePlay() {
          if (!isPlaying) {
              Promise.all([beforeAudio.play(), afterAudio.play()]).then(() => {
                  playIcon.style.display  = "none";
                  pauseIcon.style.display = "block";
                  isPlaying = true;
              }).catch(error => console.error("Error playing audio:", error));
          } else {
              beforeAudio.pause();
              afterAudio.pause();
              playIcon.style.display  = "block";
              pauseIcon.style.display = "none";
              isPlaying = false;
          }
      }

      playPauseBtn.addEventListener("click", function(event) {
          event.stopPropagation();
          togglePlay();
      });

      toggleSwitch.addEventListener("click", function() {
          isAfter = !isAfter;
          audioBox.classList.toggle("active");

          if (isAfter) {
              beforeAudio.muted = true;
              afterAudio.muted  = false;
              syncPlayback();
              if (trackSubtitle.textContent?.includes("Alissa")) {
                  trackSubtitle.innerText = "After: Rich & Professional";
              } else {
                  trackSubtitle.innerText = "After: Clear & Punchy";
              }
              trackSubtitle.style.color = audioWidgetContainer.style.getPropertyValue('--primary-color');
          } else {
              beforeAudio.muted = false;
              afterAudio.muted  = true;
              syncPlayback();
              if (trackSubtitle.textContent?.includes("Rich") || trackSubtitle.textContent?.includes("Professional")) {
                  trackSubtitle.innerText = "Before: Thin & Lifeless";
              } else {
                  trackSubtitle.innerText = "Before: Muddy & Weak";
              }
              trackSubtitle.style.color = audioWidgetContainer.style.getPropertyValue('--text-secondary');
          }
      });

      // Set default state
      beforeAudio.muted = false;
      afterAudio.muted  = true;
      trackSubtitle.style.color = audioWidgetContainer.style.getPropertyValue('--text-secondary');
    });
  })();
</script> 