---
// src/components/Section3WhoThisIsFor.astro
const quizOptions = [
    { id: 'low-end', text: "My low end sounds weak and muddy compared to chart hits", icon: "üéõÔ∏è",  response: "Low end problems are usually frequency masking and tonal balance issues. Our stem analysis will show you exactly how pro tracks achieve that tight, punchy foundation and the specific EQ moves to get there."}, 
    { id: 'amateur', text: "My tracks sound 'almost there' but never quite professional", icon: "üéß", response: "That 'almost there' gap is usually 3-5 specific technical issues. Our analysis reveals the exact measurements and targets that separate bedroom producers from chart-ready tracks." },
    { id: 'space-depth', text: "My mixes sound flat and lifeless compared to references", icon: "üåå", response: "Professional depth comes from precise stereo imaging, reverb placement, and frequency separation. We'll show you the exact spatial techniques used in hits from your genre."}, 
    { id: 'submissions', text: "A&Rs and playlists keep saying 'it's not quite there yet'", icon: "üìà", response: "Industry gatekeepers can spot amateur productions instantly. We'll reveal the specific sonic markers they listen for and how to achieve them in your tracks." }, 
];
---
<section id="who-is-this-for" class="py-16 md:py-24 bg-gradient-to-b from-[#080810] to-[#0c0c18] px-4 md:px-8">
    <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12 md:mb-16 max-w-3xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-extrabold text-white tracking-tight leading-none pb-3" data-animate="fade" data-delay="100">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-pulse-purple to-pulse-cyan pb-2 leading-normal">Let's Pinpoint Exactly What Needs Fixing</span>
            </h2>
        </div>

        <div class="max-w-5xl mx-auto card-gradient p-1 rounded-2xl shadow-glass overflow-hidden border border-gray-800/20" data-animate="fade" data-delay="200">
            <div class="md:flex rounded-xl overflow-hidden">
                <!-- Left Column: Question -->
                <div class="md:w-1/3 bg-[#080810] p-6 md:p-8 flex flex-col justify-center border-r border-gray-800/20">
                    <h3 class="text-2xl md:text-3xl font-semibold text-silvery-gradient leading-normal tracking-tight pb-3">
                        What's your biggest mix struggle?
                    </h3>
                    <p class="text-gray-400 mt-3 text-sm">Select an option to see how we can help.</p>
                </div>

                <!-- Right Column: Radio Buttons -->
                <div class="md:w-2/3 bg-[#0c0c18] p-6 md:p-8">
                    <div id="interactive-quiz" class="space-y-4">
                        {quizOptions.map(option => (
                            <label for={option.id} class="flex items-center space-x-3 p-4 bg-[#080810] hover:bg-pulse-purple/10 rounded-lg cursor-pointer transition-all duration-200 border border-gray-800/30 hover:border-pulse-purple/50 group">
                                <input type="radio" name="mix-struggle" value={option.id} id={option.id} class="form-radio h-5 w-5 text-pulse-purple bg-[#080810] border-gray-700 focus:ring-2 focus:ring-pulse-purple focus:ring-offset-2 focus:ring-offset-[#0c0c18]" data-response={option.response} />
                                <span class="text-2xl mr-1 transition-transform duration-200 group-hover:scale-110">{option.icon}</span>
                                <span class="text-gray-300 group-hover:text-white transition-colors">{option.text}</span>
                            </label>
                        ))}
                    </div>
                </div>
            </div>
            <div id="dynamic-quiz-content-container" class="bg-gradient-to-r from-pulse-purple/5 to-pulse-cyan/5 p-6 md:p-8 border-t border-gray-800/30 min-h-[80px]">
                <div id="dynamic-quiz-content" class="text-gray-300 text-md opacity-0">
                    <!-- Content will be injected here by JS -->
                    <p class="italic text-gray-500">Select an option above to see relevant information.</p>
                </div>
            </div>
        </div>

        <!-- Who this IS / IS NOT FOR -->
        <div class="mt-16 md:mt-20 grid md:grid-cols-2 gap-8 md:gap-10 max-w-5xl mx-auto" data-animate="fade" data-delay="300">
            <div class="card-gradient p-6 md:p-8 rounded-2xl shadow-glass border border-gray-800/20">
                <div class="flex items-center gap-3 mb-6">
                    <div class="bg-pulse-purple/10 p-2 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-pulse-purple" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-silvery-gradient pb-2">This is PERFECT for you if:</h3>
                </div>
                <ul class="space-y-4 list-none text-gray-300">
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You can create full tracks but they sound "amateur" compared to pro releases</li>
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You've been producing for 1+ years and know your way around your DAW</li>
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You're serious about getting signed, playlisted, or building a fanbase</li>
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You're tired of guessing what's wrong and want data-driven insights</li>
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You want to understand WHY pro tracks sound better, not just copy techniques</li>
                    <li class="flex items-start"><span class="text-pulse-purple mr-3">‚úì</span>You're ready to implement feedback and make real changes to your approach</li>
                </ul>
            </div>

            <div class="card-gradient p-6 md:p-8 rounded-2xl shadow-glass border border-gray-800/20">
                <div class="flex items-center gap-3 mb-6">
                    <div class="bg-yellow-500/10 p-2 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-yellow-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-semibold text-silvery-gradient pb-2">This works best if:</h3>
                </div>
                <ul class="space-y-4 list-none text-gray-300">
                    <li class="flex items-start"><span class="text-yellow-500 mr-3">‚ö†</span>You have at least some experience with music production</li>
                    <li class="flex items-start"><span class="text-yellow-500 mr-3">‚ö†</span>You're ready to take action on specific feedback</li>
                    <li class="flex items-start"><span class="text-yellow-500 mr-3">‚ö†</span>You want to understand technical changes, not just quick fixes</li>
                    <li class="flex items-start"><span class="text-yellow-500 mr-3">‚ö†</span>You're willing to invest time in implementing improvements</li>
                </ul>
                
                <!-- Softer Message -->
                <div class="mt-6 p-4 bg-pulse-cyan/5 rounded-lg border-l-4 border-pulse-cyan">
                    <p class="text-sm text-gray-400">
                        <strong class="text-pulse-cyan">Even if you think your track is terrible,</strong> our analysis can help. The goal is showing you exactly what needs fixing, regardless of your current skill level.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    const quiz = document.getElementById('interactive-quiz');
    const dynamicContentDiv = document.getElementById('dynamic-quiz-content');

    if (quiz && dynamicContentDiv) {
        quiz.addEventListener('change', (event) => {
            const target = event.target as HTMLInputElement;
            if (target.name === 'mix-struggle') {
                const responseText = target.dataset.response || "Please select an option.";
                // Apply fade out, then change content, then fade in
                dynamicContentDiv.classList.remove('animate-fade-in-bottom', 'opacity-100');
                dynamicContentDiv.classList.add('opacity-0');

                setTimeout(() => {
                    dynamicContentDiv.innerHTML = `<p>${responseText}</p>`;
                    dynamicContentDiv.classList.add('animate-fade-in-bottom', 'opacity-100');
                }, 150); // Short delay to allow opacity to reset before fade-in
            }
        });
    }
</script> 